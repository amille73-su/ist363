<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P2 Bootstrap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        
    </style>
</head>
<body class="bg-secondary h-100">

    <header>
        <nav class="navbar navbar-expand-md bg-dark border-bottom border-body" data-bs-theme="dark">
            <div class="container">
                <div class="d-flex justify-content-between w-100">
                    <p class="mb-0">
                        <span class="text-warning h2">Movie</span><span class="text-white h2">Verse</span>
                    </p>
                    <button class="navbar-toggler d-md-none navbar-dark" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <div class="navbar-nav ms-auto">
                        <a class="nav-link text-white text-decoration-none" href="">Home</a>
                        <a class="nav-link text-white text-decoration-none" href="">Movies</a>
                        <a class="nav-link text-white text-decoration-none" href="">Series</a>
                        <a class="nav-link text-white text-decoration-none" href="">More</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    
    
    <main>
        <section id="selectors" class="container mx-auto m-3 bg-dark text-white text-center rounded">
            <h1 class="pt-4 pb-2 text-warning ">Movie Lovers!!</h1>
            <p class="p-2">We love movies! Do you? <br>To learn more about your favorite movies, select an option below!</p>
            <div class="pb-4">
                <select id="movieSelect" class="bg-dark text-white rounded">
                    <option value="" class="text-center">-- Select a Movie --</option>
                    <option value="tt0103639">Aladdin</option>
                    <option value="tt0078748">Alien</option>
                    <option value="tt0848228">Avengers</option>
                    <option value="tt0034583">Casablanca</option>
                    <option value="tt0095765">Cinema Paradiso</option>
                    <option value="tt0087182">Dune</option>
                    <option value="tt6710474">Everything Everywhere All at Once</option>
                    <option value="tt0266543">Finding Nemo</option>
                    <option value="tt0109830">Forrest Gump</option>
                    <option value="tt2294629">Frozen</option>
                    <option value="tt5052448">Get Out</option>
                    <option value="tt0031381">Gone with the Wind</option>
                    <option value="tt1375666">Inception</option>
                    <option value="tt0107290">Jurassic Park</option>
                    <option value="tt3783958">La La Land</option>
                    <option value="tt1392190">Mad Max: Fury Road</option>
                    <option value="tt0071853">Monty Python and the Holy Grail</option>
                    <option value="tt0125439">Notting Hill</option>
                    <option value="tt6751668">Parasite</option>
                    <option value="tt0100405">Pretty Woman</option>
                    <option value="tt0110912">Pulp Fiction</option>
                    <option value="tt0082971">Raiders of the Lost Ark</option>
                    <option value="tt0117509">Romeo + Juliet</option>
                    <option value="tt0108052">Schindler's List</option>
                    <option value="tt0126029">Shrek</option>
                    <option value="tt0245429">Spirited Away</option>
                    <option value="tt0076759">Star Wars: Episode IV</option>
                    <option value="tt0829482">Superbad</option>
                    <option value="tt0468569">The Dark Knight</option>
                    <option value="tt0068646">The Godfather</option>
                    <option value="tt2278388">The Grand Budapest Hotel</option>
                    <option value="tt0110357">The Lion King</option>
                    <option value="tt0133093">The Matrix</option>
                    <option value="tt0332280">The Notebook</option>
                    <option value="tt0111161">The Shawshank Redemption</option>
                    <option value="tt0102926">The Silence of the Lambs</option>
                    <option value="tt1285016">The Social Network</option>
                    <option value="tt0120338">Titanic</option>
                    <option value="tt0114709">Toy Story</option>
                </select>
                <button onclick="getMovieData()" class="bg-dark text-white rounded">Get Info</button>    
            </div>
        </section>
    

        <section class="container bg-dark text-white rounded p-3 mb-3 text-md-start text-center">
            <p><strong>The movie you chose is:</strong> <span id="title">Title</span>, rated <span id="rating">___</span></p>
            <p><strong>This movie is about:</strong> <span id="plot"></span></p>
            <p><strong>More detailed reviews:</strong> <br><span id="detailedRatings"></span></p>
        </section>
        

        <section class="continer mb-3">
            <div class="row mx-auto ">
                <div class="col-md-4">
                    <div class=" p-3 bg-dark text-white rounded mt-3">
                        <h2>Movie Director: </h2>
                        <p id="director">[Director Name]</p>
                    </div>
                </div>
                <div class="col-md-4 md:mt-3">
                    <div class=" p-3 bg-dark text-white rounded mt-3">
                        <h2>Year of Release: </h2>
                        <p id="year">[Year]</p>
                    </div>
                </div>
                <div class="col-md-4 md:mt-3">
                    <div class=" p-3 bg-dark text-white rounded mt-3">
                        <h2>Star Rating: </h2>
                        <p id="stars" class="text-warning">☆☆☆☆☆</p>
                    </div>
                </div>
            </div>
        </section>
    

        <section id="general" class="container mb-3">
            <div class="row">
                <div class="col-md-7">
                    <div class="row">
                        <div class="col">
                            <div class="container bg-dark text-white rounded p-2">
                                <h2 class="text-center">5 of the World's Best Movies</h2>
                                <ul>
                                    <li>The Godfather (1972)</li>
                                    <li>Casablance (1942)</li>
                                    <li>Parasite (2019)</li>
                                    <li>How to Train Your Dragon (2010)</li>
                                    <li>Singin' in the Rain (1952)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="container bg-dark text-white rounded p-2 mt-3">
                                <h2 class="text-center">Top 5 Directors of All Time</h2>
                                <ul>
                                    <li>Steven Spielberg</li>
                                    <li>Martin Scorsese</li>
                                    <li>Alfred Hitchcock</li>
                                    <li>James Cameron</li>
                                    <li>Spike Lee</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col mt-md-0 mt-3">
                    <div class="carousel slide " id="portfolioCarousel" data-bs-ride="carousel">
                        <div class="carousel-inner rounded">
                            <div class="carousel-item ">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/Aladdin.jpg" alt="blue flower">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/avatar.jpg" alt="mountains">
                            </div>
                            <div class="carousel-item ">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/ET.jpg" alt="clouds">
                            </div>
                            <div class="carousel-item active">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/Godfather.jpg" alt="architecture">
                            </div>
                            <div class="carousel-item ">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/HomeAlone.jpg" alt="lake">
                            </div>
                            <div class="carousel-item ">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/IndianaJones.jpg" alt="plum">
                            </div>
                            <div class="carousel-item ">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/JAWS.jpg" alt="snow">
                            </div>
                            <div class="carousel-item ">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/JurassicPark.jpg" alt="blue eryngo">
                            </div>
                            <div class="carousel-item ">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/ROCKY.jpg" alt="blue art">
                            </div>
                            <div class="carousel-item ">
                                <img class="d-block w-100 object-fit-lg-contain" src="images/StarWars.jpg" alt="blue art">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#portfolioCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                          </button>
                          <button class="carousel-control-next" type="button" data-bs-target="#portfolioCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                          </button>
                    </div>
                </div>
            </div>
        </section>        
          

    </main>

    <footer class="bg-dark text-white mb-0">
        <div class="d-flex justify-content-between w-100">
            <h5 class="p-3"><strong>Alexandra Miller-Thomas</strong></h5>
            <p class="p-3">© 2025</p>
        </div>
        <div class="px-3 pb-2 text-center">
            <p>For all film lovers, learn more about your favorite movies such as the year of release, director, and average star rating! You can also learn about the top rated movies and directors, according to Rotten Tomatoes. Enjoy!</p>
        </div>
    </footer>

    
    <script>
        // Function to conver IMDb rating to star emojis
        function convertRatingToStars(imdbRating) {
        let stars = '';
        
        // Ensure the rating is a valid number
        imdbRating = parseFloat(imdbRating);

        if (isNaN(imdbRating)) {
            return 'N/A'; // Return N/A if the rating is invalid
        }

        // Determine the number of stars based on the IMDb rating
        if (imdbRating >= 0 && imdbRating < 2) {
            stars = '★☆☆☆☆';
        } else if (imdbRating >= 2 && imdbRating < 4) {
            stars = '★★☆☆☆';
        } else if (imdbRating >= 4 && imdbRating < 6) {
            stars = '★★★☆☆';
        } else if (imdbRating >= 6 && imdbRating < 8) {
            stars = '★★★★☆';
        } else if (imdbRating >= 8 && imdbRating <= 10) {
            stars = '★★★★★';
        }

        return stars;
    }

        // Function to display movie data
        function displayMovieData(movieData) {
            // Update the DOM with movie data
            document.getElementById('title').innerHTML = movieData.Title || "-";
            document.getElementById('year').innerHTML = movieData.Year || "-";
            document.getElementById('plot').innerHTML = movieData.Plot || "-";
            document.getElementById('rating').innerHTML = movieData.Rated || "-";
            
            // After displaying basic info, fetch detailed ratings
            getDetailedRatings(movieData.imdbID);
        }

        // Function to get detailed ratings (IMDb and Rotten Tomatoes) using IMDb ID
        async function getDetailedRatings(imdbId) {
            try {
                const response = await fetch(`https://movies-ratings2.p.rapidapi.com/ratings?id=${imdbId}`, {
                    method: 'GET',
                    headers: {
                        'x-rapidapi-key': 'b3ad7f21afmsh284b4f37ad35180p152a4ejsnd936d5d98cf5',
                        'x-rapidapi-host': 'movies-ratings2.p.rapidapi.com'
                    }
                });
                if (!response.ok) throw new Error('Error fetching detailed ratings');
                
                const ratingsData = await response.json();
                
                // Update detailed ratings in the DOM
                const imdbRating = ratingsData.ratings.imdb.score || 'N/A';
                const rottenTomatoesRating = ratingsData.ratings.rotten_tomatoes.tomatometer || 'N/A';
                const Director = ratingsData.media.director || 'N/A';
                const imdbStars = convertRatingToStars(imdbRating);  // Convert to star emojis

                
                document.getElementById('detailedRatings').innerHTML = `
                    IMDb Rating: ${imdbRating}<br>
                    Rotten Tomatoes Rating: ${rottenTomatoesRating}
                `;
                document.getElementById('director').innerHTML = `
                    ${Director}
                `;document.getElementById('stars').innerHTML = `
                    ${imdbStars}
                `;
            } catch (error) {
                console.error('Error fetching detailed ratings:', error);
                document.getElementById('detailedRatings').innerHTML = 'Error fetching ratings and director information';
                document.getElementById('director').innerHTML = 'Cannot be found';
                document.getElementById('stars').innerHTML = 'Star rating unknown';
            }
        }
    
        // Function to get movie data based on selected movie
        async function getMovieData() {
            const selectedMovie = document.getElementById('movieSelect').value;
    
            // Check if a movie is selected
            if (!selectedMovie) {
                alert("Please select a movie first!");
                return;
            }
    
            // API endpoint for movie data using IMDb ID
            const endpoint = `https://www.omdbapi.com/?i=${encodeURIComponent(selectedMovie)}&apikey=3b39687`;
    
            try {
                const response = await fetch(endpoint);
                if (!response.ok) throw new Error('Error fetching movie data');
                
                const movieData = await response.json();
                
                // Call function to display movie data
                displayMovieData(movieData);
            } catch (error) {
                console.error('Error fetching movie data:', error);
                displayMovieData({ Title: 'Error loading movie data' });
            }
        }
    </script>
</body>
</html>